# Use a registry to store methods for converting between sequence types

## Status

Accepted

## Context

To allow chained operations including conversion between different types of Sequence, it is necessary to make the generic Sequence aware of its children.

This obviously cannot be done directly without recursive imports, which is not desirable.

Currently this is implemented by passing in a metadata object to every Sequence on creation. This adds unnecessary footprint, particularly given that the operations this object relates to are unlikely to be common. Therefore a better solution is desired. It would be possible to use a singleton Registry or dependency injection for this, but the latter may be unnecessarily complex.

## Decision

- We will implement a simple singleton/static Registry class that can store these objects and implement using this.

## Consequences

- We can remove the bloat generated by the sequence_constructor_map metadata field.
- We need to ensure that Sequences cannot be created without this registry being populated.
- If additional cases of this nature occur and a registry is a reasonable solution, we can reuse it.
